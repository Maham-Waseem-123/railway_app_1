{% extends 'base.html' %}
{% block title %}Search Results{% endblock %}

{% block content %}
<div class="search-results-container">
  <h2>Available Trains</h2>
  <p class="subtitle">Showing results for {{ form.departure_city.data }} to {{ form.arrival_city.data }} on {{ form.travel_date.data.strftime('%Y-%m-%d') }}</p>

  {% if not results %}
    <div class="no-results">
      <p>No trains found for your search criteria.</p>
      <a href="/search" class="btn btn-primary">Search Again</a>
    </div>
  {% else %}
    <div class="results-grid">
      {% for result in results %}
      <div class="train-card">
        <div class="train-header">
          <h3>{{ result.train.train_name }}</h3>
          <span class="train-number">{{ result.train.train_number }}</span>
        </div>
        
        <div class="train-details">
          <div class="route">
            <div class="station">
              <span class="city">{{ result.train.departure_city }}</span>
              <span class="time">Departure: 08:00 AM</span>
            </div>
            <div class="divider">
              <span class="line"></span>
              <span class="duration">12h 30m</span>
            </div>
            <div class="station">
              <span class="city">{{ result.train.arrival_city }}</span>
              <span class="time">Arrival: 08:30 PM</span>
            </div>
          </div>
          
          <div class="seats-availability">
            <h4>Available Seats</h4>
            <div class="seat-types">
              <div class="seat-type">
                <span>Economy</span>
                <span class="badge">{{ result.available_seats.economy }}</span>
              </div>
              <div class="seat-type">
                <span>Economy Birth</span>
                <span class="badge">{{ result.available_seats.economy_birth }}</span>
              </div>
              <div class="seat-type">
                <span>AC Business</span>
                <span class="badge">{{ result.available_seats.ac_business }}</span>
              </div>
              <div class="seat-type">
                <span>AC Standard</span>
                <span class="badge">{{ result.available_seats.ac_standard }}</span>
              </div>
              <div class="seat-type">
                <span>AC Sleeper</span>
                <span class="badge">{{ result.available_seats.ac_sleeper }}</span>
              </div>
            </div>
          </div>
        </div>
        
        <div class="train-actions">
          <a href="{{ url_for('book_train', train_number=result.train.train_number, travel_date=form.travel_date.data.strftime('%Y-%m-%d')) }}" 
             class="btn btn-primary">
            Book Now
          </a>
        </div>
      </div>
      {% endfor %}
    </div>
  {% endif %}
</div>

<style>
  .search-results-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
    color: black;
  }

  .search-results-container h2 {
    font-size: 2rem;
    margin-bottom: 0.5rem;
    color: rgb(255, 255, 255);
  }

  .subtitle {
    font-size: 1.1rem;
    margin-bottom: 2rem;
    opacity: 0.8;
    color: rgb(255, 255, 255);
  }

  .no-results {
    text-align: center;
    padding: 2rem;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    backdrop-filter: blur(8px);
    color: black;
  }

  .results-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
    gap: 1.5rem;
  }

  .train-card {
    background: rgba(255, 255, 255, 0.1);
    padding: 1.5rem;
    border-radius: 10px;
    backdrop-filter: blur(8px);
    transition: transform 0.3s ease;
    color: black;
  }

  .train-card:hover {
    transform: translateY(-5px);
  }

  .train-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
  }

  .train-header h3 {
    margin: 0;
    font-size: 1.5rem;
    color: rgb(255, 252, 252);
  }

  .train-number {
    background: rgba(238, 255, 0, 0.2);
    color: #eeff00;
    padding: 0.3rem 0.8rem;
    border-radius: 20px;
    font-size: 0.9rem;
  }

  .route {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    margin-bottom: 1.5rem;
  }

  .station {
    display: flex;
    justify-content: space-between;
  }

  .city {
    font-weight: bold;
    font-size: 1.2rem;
    color: rgb(255, 255, 255);
  }

  .time {
    opacity: 0.7;
    font-size: 0.9rem;
    color: rgb(255, 254, 254);
  }

  .divider {
    display: flex;
    align-items: center;
    position: relative;
    height: 20px;
    margin: 0.5rem 0;
  }

  .line {
    flex-grow: 1;
    height: 2px;
    background: rgba(238, 255, 0, 0.5);
  }

  .duration {
    margin: 0 1rem;
    font-size: 0.8rem;
    color: rgb(255, 255, 255);
  }

  .seats-availability h4 {
    margin-bottom: 1rem;
    font-size: 1.1rem;
    color: #eeff00;
  }

  .seat-types {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.8rem;
  }

  .seat-type {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.5rem;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 5px;
    color: rgb(255, 255, 255);
  }

  .badge {
    background: rgba(238, 255, 0, 0.2);
    color: #eeff00;
    padding: 0.2rem 0.6rem;
    border-radius: 10px;
    font-size: 0.9rem;
  }

  .train-actions {
    margin-top: 1.5rem;
    text-align: center;
  }

  @media (max-width: 768px) {
    .results-grid {
      grid-template-columns: 1fr;
    }
    
    .seat-types {
      grid-template-columns: 1fr;
    }
  }
</style>
{% endblock %}
